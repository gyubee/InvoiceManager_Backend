{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8001","description":"Generated server url"}],"paths":{"/users/{id}":{"get":{"tags":["user-controller"],"operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}}}}},"put":{"tags":["user-controller"],"operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}}}}},"delete":{"tags":["user-controller"],"operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/invoicemanager/products/{productId}/stock":{"get":{"tags":["product-controller"],"summary":"Get stock by product ID","description":"Retrieve the stock quantity for a specific product.","operationId":"getStockByProductId","parameters":[{"name":"productId","in":"path","description":"ID of the product to check stock for","required":true,"schema":{"type":"integer","format":"int32"},"example":1}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"integer","format":"int32"}}}}}},"put":{"tags":["product-controller"],"summary":"Update product stock","description":"Update the stock quantity for a specific product.","operationId":"updateProductStock","parameters":[{"name":"productId","in":"path","description":"ID of the product to update","required":true,"schema":{"type":"integer","format":"int32"},"example":1},{"name":"newStock","in":"query","description":"New stock quantity","required":true,"schema":{"type":"integer","format":"int32"},"example":50}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}}}}}},"/users":{"get":{"tags":["user-controller"],"operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Users"}}}}}}},"post":{"tags":["user-controller"],"operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}}}}}},"/invoicemanager/products/{productId}/{invoiceItemId}/discounts/apply":{"post":{"tags":["product-controller"],"summary":"Apply discount to an item","description":"Apply a discount to a specific item with certain expiry date.","operationId":"applyDiscount","parameters":[{"name":"productId","in":"path","description":"ID of the product","required":true,"schema":{"type":"integer","format":"int32"},"example":1},{"name":"invoiceItemId","in":"path","description":"ID of the invoice item","required":true,"schema":{"type":"integer","format":"int32"},"example":101},{"name":"discountRate","in":"query","description":"Discount rate to apply","required":true,"schema":{"type":"number","format":"float"},"example":10.0}],"responses":{"404":{"description":"Product or invoice item not found.","content":{"application/json":{"schema":{"type":"string"}}}},"200":{"description":"Discount applied successfully.","content":{"application/json":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/invoicemanager/products/discount/global":{"post":{"tags":["product-controller"],"summary":"Apply global discount based on expiry","description":"Apply a global discount to all products based on their expiration date(this will be added to all item products that apply and created in discount table).","operationId":"applyGlobalDiscount","parameters":[{"name":"daysLeftTillExpire","in":"query","description":"Number of days left until expiry","required":true,"schema":{"type":"integer","format":"int32"},"example":10},{"name":"discountRate","in":"query","description":"Discount rate to apply globally","required":true,"schema":{"type":"number","format":"float"},"example":15.0}],"responses":{"200":{"description":"Global discount applied successfully.","content":{"application/json":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/invoice/ai/image/url":{"post":{"tags":["chat-controller"],"operationId":"describeImage","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/invoice/ai/image/upload":{"post":{"tags":["chat-controller"],"operationId":"describeImage_1","requestBody":{"content":{"application/json":{"schema":{"required":["image"],"type":"object","properties":{"image":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/invoicemanager/products/{productId}/expiry":{"get":{"tags":["product-controller"],"summary":"Get discount details by product ID","description":"Retrieve discount details needed for discount managing a specific product.","operationId":"findDiscountDetailsByProductId","parameters":[{"name":"productId","in":"path","description":"ID of the product to retrieve discount details for","required":true,"schema":{"type":"integer","format":"int32"},"example":1}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemDiscountDTO"}}}}}}}},"/invoicemanager/products/{id}":{"get":{"tags":["product-controller"],"summary":"Get product by ID","description":"Retrieve a product by its ID.","operationId":"getProductById","parameters":[{"name":"id","in":"path","description":"ID of the product to retrieve","required":true,"schema":{"type":"integer","format":"int32"},"example":1}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}}}}}},"/invoicemanager/products/stock":{"get":{"tags":["product-controller"],"summary":"Get all products sorted by stock ascending","description":"Retrieve all products sorted by stock ascending.","operationId":"getAllProductsSortedByStock","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/invoicemanager/products/expiry":{"get":{"tags":["product-controller"],"summary":"Get all products with closest expiry date first","description":"Retrieve a list of products with the closest expiry dates(not considering past expiration date).","operationId":"getAllProductsWithEarliestExpiry","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductExpiryDTO"}}}}}}}},"/invoicemanager/products/all":{"get":{"tags":["product-controller"],"summary":"Get all products","description":"Retrieve a list of all products.","operationId":"getAllProducts","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/invoicemanager/products/all/available":{"get":{"tags":["product-controller"],"summary":"Get all products with stock available","description":"Retrieve all products that have stock available(stock > 0).","operationId":"getAllProductsWithStock","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}},"/invoice/test/2":{"get":{"tags":["chat-controller"],"operationId":"test2","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/invoice/test/1":{"get":{"tags":["chat-controller"],"operationId":"test1","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"Users":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userEmail":{"type":"string"},"userPassword":{"type":"string"},"userName":{"type":"string"},"marketSize":{"type":"integer","format":"int32"},"userRole":{"type":"string"},"socialType":{"type":"string","enum":["GOOGLE","APPLE"]},"socialId":{"type":"string"},"refreshToken":{"type":"string"}}},"Category":{"type":"object","properties":{"categoryId":{"type":"integer","format":"int32"},"categoryName":{"type":"string"}}},"Company":{"type":"object","properties":{"companyId":{"type":"integer","format":"int32"},"companyName":{"type":"string"},"companyAddress":{"type":"string"},"companyEmail":{"type":"string"}}},"Product":{"type":"object","properties":{"productId":{"type":"integer","format":"int32"},"productName":{"type":"string"},"hscode":{"type":"string"},"salePrice":{"type":"number"},"stock":{"type":"integer","format":"int32"},"category":{"$ref":"#/components/schemas/Category"},"supplier":{"$ref":"#/components/schemas/Company"}}},"ItemDiscountDTO":{"type":"object","properties":{"invoiceItemId":{"type":"integer","format":"int32"},"quantity":{"type":"integer","format":"int32"},"unitPrice":{"type":"number"},"discountRate":{"type":"number","format":"float"},"expirationDate":{"type":"string","format":"date"}}},"ProductExpiryDTO":{"type":"object","properties":{"productId":{"type":"integer","format":"int32"},"productName":{"type":"string"},"hsCode":{"type":"string"},"price":{"type":"number"},"categoryName":{"type":"string"},"supplierName":{"type":"string"},"closestExpiryDate":{"type":"string","format":"date"},"quantityAtClosestExpiryDate":{"type":"integer","format":"int32"},"totalStock":{"type":"integer","format":"int32"}}}}}}